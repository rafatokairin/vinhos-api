<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Busca de Vinhos</title>
    <script>
        async function buscarVinhos(event) {
            event.preventDefault();

            // Captura dados do form
            const nome = document.getElementById('nome').value || null;
            const ano = document.getElementById('ano').value || 0;
            const uva = document.getElementById('uva').value || null;
            const vinicula = document.getElementById('vinicula').value || null;
            const regiao = document.getElementById('regiao').value || null;
            const categoria = document.getElementById('categoria').value || null;
            const estilo = document.getElementById('estilo').value || null;
            const preco = document.getElementById('preco').value || 0;

            const vinhoData = {
                nome: nome,
                ano: ano,
                uva: uva,
                vinicula: vinicula,
                regiao: regiao,
                categoria: categoria,
                estilo: estilo,
                preco: preco
            };

            try {
                const response = await fetch('/vinho/search', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(vinhoData)
                });

                if (!response.ok) {
                    throw new Error(`Erro: ${response.statusText}`);
                }

                const jsonResponse = await response.json();
                console.log(jsonResponse);

                document.getElementById('resultado').textContent = JSON.stringify(jsonResponse, null, 2);
            } catch (error) {
                console.error('Erro ao buscar vinhos:', error);
                document.getElementById('resultado').textContent = 'Erro ao buscar vinhos: ' + error.message;
            }
        }
    </script>
</head>
<body>
<h1>Busca de Vinhos</h1>
<form onsubmit="buscarVinhos(event)">
    <label for="nome">Nome:</label>
    <input type="text" id="nome" name="nome"><br>

    <label for="ano">Ano:</label>
    <input type="number" id="ano" name="ano"><br>

    <label for="uva">Uva:</label>
    <input type="text" id="uva" name="uva"><br>

    <label for="vinicula">Vinícula:</label>
    <input type="text" id="vinicula" name="vinicula"><br>

    <label for="regiao">Região:</label>
    <input type="text" id="regiao" name="regiao"><br>

    <label for="categoria">Categoria:</label>
    <input type="text" id="categoria" name="categoria"><br>

    <label for="estilo">Estilo:</label>
    <input type="text" id="estilo" name="estilo"><br>

    <label for="preco">Preço:</label>
    <input type="number" id="preco" name="preco"><br>

    <button type="submit">Buscar</button>
</form>

<h2>Resultados:</h2>
<pre id="resultado"></pre>
</body>
</html>
